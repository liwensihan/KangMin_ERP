/**
 * 
 */
package com.yidu.action.ErpApplyasset;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.annotation.Resource;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import com.yidu.model.ErpApplyasset;
import com.yidu.service.ErpApplyasset.ErpApplyassetService;
import com.yidu.util.Pages;
import com.yidu.util.SsmMessage;

/**
 * @author zhangwei
 * 2017年10月19日
 */
@Controller
@RequestMapping("/applyasset")
public class ErpApplyassetAction {

	@Resource
	private ErpApplyassetService service;//资金申请接口
	
	
	/**
	 * 得到支出的集合
	 * @author 胡鑫
	 * @date 2017年11月9日08:40:31
	 * @param page 当前页数
	 * @param limit 每页显示的行数
	 * @param keyWord 模糊查询参数
	 * @param state 状态
	 * @param staTime 开始时间
	 * @param endTime 结束时间
	 * @return 返回map集合
	 */
	@ResponseBody
	@RequestMapping("showList")
	public Map<String,Object> showList(String page,String limit,String keyWord,String state,String staTime,String endTime){
		
		Map<String,Object> paraMap = new HashMap<String,Object>();//定义一个map集合 传入参数查询出集合
		Pages pages = new Pages();//定义一个分页实体类
		pages.setCurPage(Integer.valueOf(page));//设值 开始的行数
		pages.setMaxResult(Integer.valueOf(limit));//设值 每页显示的行数
		paraMap.put("pages", pages);//存入map
		paraMap.put("keyWord", keyWord);//模糊查询参数存入map
		paraMap.put("state", state);//状态查询参数
		paraMap.put("staTime", staTime);//开始的时间
		paraMap.put("endTime", endTime);//结束时间
		List<ErpApplyasset>list = service.showList(paraMap);//得到支出集合 传入 paraMap集合
		Map<String,Object> map = new HashMap<String,Object>();//定义一个map集合对应返回jsp页面需要的参数
		map.put("list", list);//对应layui数据表格数据参数
		map.put("count", service.findCount(map));//对应layui数据表格行数参数
		map.put("msg", "");
		map.put("code", 0);
		return map;
	}
	
}
